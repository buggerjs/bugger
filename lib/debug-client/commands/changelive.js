// Generated by CoffeeScript 2.0.0-beta7
var ErrorObjectFromMessage, RemoteScript;
RemoteScript = require('../remote-script');
ErrorObjectFromMessage = require('../remote-object').ErrorObjectFromMessage;
module.exports = function (debugClient) {
  var changelive;
  changelive = function (param$, cb) {
    var cache$, params, preview, scriptId, scriptSource;
    {
      cache$ = param$;
      scriptId = cache$.scriptId;
      scriptSource = cache$.scriptSource;
      preview = cache$.preview;
    }
    params = {
      script_id: scriptId,
      preview_only: preview,
      new_source: scriptSource
    };
    return debugClient.sendRequest('changelive', params, function (err, response) {
      var body, cache$1, message, refMap, success;
      cache$1 = response;
      refMap = cache$1.refMap;
      body = cache$1.body;
      success = cache$1.success;
      message = cache$1.message;
      if (success) {
        return cb(null, body);
      } else {
        return cb(ErrorObjectFromMessage({})(refMap)(message));
      }
    });
  };
  return changelive;
};
